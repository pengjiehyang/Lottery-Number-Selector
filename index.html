<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>彩票選號器</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 自定義字體 */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #a8c0ff, #3f2b96); /* 柔和的藍紫色漸變背景 */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden; /* 防止滾動條 */
        }

        /* 容器樣式 */
        .container {
            background-color: rgba(255, 255, 255, 0.95); /* 半透明白色背景 */
            border-radius: 25px; /* 更圓潤的邊角 */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2); /* 更深的陰影 */
            padding: 40px; /* 增加內邊距 */
            max-width: 550px; /* 稍微增加最大寬度 */
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 30px; /* 增加元素間距 */
            backdrop-filter: blur(5px); /* 磨砂玻璃效果 */
            border: 1px solid rgba(255, 255, 255, 0.3); /* 輕微邊框 */
        }

        h1 {
            color: #3f2b96; /* 深藍紫色標題 */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        p {
            color: #555;
        }

        /* 號碼顯示區域 */
        .number-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 18px; /* 號碼球間距 */
            min-height: 120px; /* 確保有足夠的顯示空間 */
            align-items: center;
            padding: 10px 0;
        }

        /* 號碼球樣式 */
        .number-ball {
            background: linear-gradient(145deg, #6a11cb, #2575fc); /* 藍紫色漸變 */
            color: white;
            font-size: 2.5rem; /* 更大的字體 */
            font-weight: bold;
            width: 75px; /* 號碼球大小 */
            height: 75px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25); /* 更明顯的陰影 */
            transition: all 0.3s ease-in-out; /* 更平滑的過渡 */
            border: 3px solid rgba(255, 255, 255, 0.5); /* 白色邊框 */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            animation: bounceIn 0.6s ease-out forwards; /* 新增進入動畫 */
        }

        .number-ball.special { /* 威力彩特別號碼球樣式 */
            background: linear-gradient(145deg, #ff9800, #ff5722); /* 橙紅色漸變 */
            border-color: rgba(255, 255, 255, 0.7);
        }

        .number-ball:hover {
            transform: scale(1.1) rotate(5deg); /* 懸停放大並旋轉 */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
        }

        /* 按鈕樣式 */
        .button {
            padding: 16px 35px;
            border-radius: 30px; /* 更圓潤的按鈕 */
            font-size: 1.3rem; /* 更大的字體 */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* 更流暢的過渡 */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* 按鈕陰影 */
            border: none;
            letter-spacing: 1px; /* 字元間距 */
            text-transform: uppercase; /* 大寫 */
        }

        .generate-button {
            background: linear-gradient(45deg, #2575fc 0%, #6a11cb 100%); /* 反向漸變 */
            color: white;
            background-size: 200% auto; /* 為動畫準備 */
        }
        .generate-button:hover {
            background-position: right center; /* 漸變動畫 */
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
        }

        .reset-button {
            background: linear-gradient(45deg, #f44336 0%, #d32f2f 100%); /* 紅色漸變 */
            color: white;
            background-size: 200% auto;
        }
        .reset-button:hover {
            background-position: right center;
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
        }

        /* 下拉選單樣式 */
        .select-container {
            margin-bottom: 25px;
            position: relative;
        }
        .lottery-select {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #ddd;
            font-size: 1.15rem;
            background-color: #fefefe;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13%205.4L146.2%20268.7%2018.8%2074.8c-1.8-2.6-4.9-4.1-8.9-4.1h-5.4c-4%200-7.1%201.5-8.9%204.1L.4%2079.8a17.6%2017.6%200%200%200%200%2024.4l136.8%20144.1c1.8%202.6%204.9%204.1%208.9%204.1s7.1-1.5%208.9-4.1L292%20104.2a17.6%2017.6%200%200%200%200-24.4l-4.4-5.4a17.6%2017.6%200%200%200-13-5.4z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 15px top 50%;
            background-size: 15px auto;
            padding-right: 40px; /* 為箭頭留出更多空間 */
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: border-color 0.3s ease;
        }
        .lottery-select:focus {
            outline: none;
            border-color: #6a11cb;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.2);
        }

        /* 進入動畫 */
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3) translateY(-50px);
            }
            50% {
                opacity: 1;
                transform: scale(1.05) translateY(10px);
            }
            70% {
                transform: scale(0.95) translateY(-5px);
            }
            100% {
                transform: scale(1) translateY(0);
            }
        }

        /* 響應式設計 */
        @media (max-width: 640px) {
            .container {
                padding: 25px;
                gap: 20px;
            }
            .number-ball {
                width: 65px;
                height: 65px;
                font-size: 2rem;
                gap: 12px;
            }
            .button {
                padding: 14px 28px;
                font-size: 1.15rem;
            }
            .lottery-select {
                padding: 12px;
                font-size: 1rem;
            }
            h1 {
                font-size: 2.5rem;
            }
            p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl font-extrabold mb-4">彩票選號器</h1>
        <p class="text-lg mb-6">點擊按鈕生成您的幸運號碼！</p>

        <div class="select-container">
            <label for="lotteryType" class="block text-gray-700 text-left text-sm font-bold mb-2">選擇彩票類型:</label>
            <select id="lotteryType" class="lottery-select">
                <option value="dlt">大樂透 (Mega 6/49)</option>
                <option value="wlc">威力彩 (Super Lotto)</option>
                <option value="jc539">今彩539 (Daily Cash 5/39)</option>
                <option value="swc">雙贏彩 (Win-Win Lotto)</option>
                <option value="sxc">3星彩 (3-Star Lotto)</option>
                <option value="ssxc">4星彩 (4-Star Lotto)</option>
                <option value="bingo">BINGO BINGO</option>
            </select>
        </div>

        <div class="number-display" id="numberDisplay">
            <!-- 號碼球將在這裡顯示 -->
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mt-6">
            <button id="generateBtn" class="button generate-button">生成號碼</button>
            <button id="resetBtn" class="button reset-button">重置</button>
        </div>
    </div>

    <script>
        // 獲取 DOM 元素
        const numberDisplay = document.getElementById('numberDisplay');
        const generateBtn = document.getElementById('generateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const lotteryTypeSelect = document.getElementById('lotteryType');

        // 彩票號碼的設定
        const lotteryConfigs = {
            'dlt': { name: '大樂透 (Mega 6/49)', balls: 6, min: 1, max: 49, type: 'single_range' },
            'wlc': { name: '威力彩 (Super Lotto)', balls: 6, min: 1, max: 38, specialBall: { min: 1, max: 8 }, type: 'two_ranges' },
            'jc539': { name: '今彩539 (Daily Cash 5/39)', balls: 5, min: 1, max: 39, type: 'single_range' },
            'swc': { name: '雙贏彩 (Win-Win Lotto)', balls: 7, min: 1, max: 24, type: 'single_range' }, // 7個號碼，1-24
            'sxc': { name: '3星彩 (3-Star Lotto)', digits: 3, min: 0, max: 9, type: 'repeatable_digits' }, // 3個號碼，0-9，可重複
            'ssxc': { name: '4星彩 (4-Star Lotto)', digits: 4, min: 0, max: 9, type: 'repeatable_digits' }, // 4個號碼，0-9，可重複
            'bingo': { name: 'BINGO BINGO', balls: 20, min: 1, max: 80, type: 'single_range' } // 20個號碼，1-80
        };

        let currentLotteryConfig = lotteryConfigs[lotteryTypeSelect.value];

        /**
         * 生成一組不重複的隨機號碼 (用於大樂透、威力彩、今彩539、雙贏彩、BINGO BINGO)
         * @param {number} count - 要生成的號碼數量
         * @param {number} min - 號碼範圍的最小值
         * @param {number} max - 號碼範圍的最大值
         * @returns {number[]} 生成的隨機號碼陣列
         */
        function generateUniqueRandomNumbers(count, min, max) {
            if (count > (max - min + 1)) {
                console.error("要生成的號碼數量超過了範圍內的可用號碼數量。");
                return [];
            }

            const numbers = new Set(); // 使用 Set 確保號碼唯一
            while (numbers.size < count) {
                const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
                numbers.add(randomNumber);
            }
            return Array.from(numbers).sort((a, b) => a - b); // 轉換為陣列並排序
        }

        /**
         * 生成一組可重複的隨機號碼 (用於3星彩, 4星彩)
         * @param {number} count - 要生成的號碼數量 (位數)
         * @param {number} min - 號碼範圍的最小值
         * @param {number} max - 號碼範圍的最大值
         * @returns {number[]} 生成的隨機號碼陣列
         */
        function generateRepeatableRandomNumbers(count, min, max) {
            const numbers = [];
            for (let i = 0; i < count; i++) {
                const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
                numbers.push(randomNumber);
            }
            return numbers; // 不排序，因為是位數
        }

        /**
         * 顯示號碼球
         * @param {number[]} numbers - 要顯示的號碼陣列 (主號碼或數字)
         * @param {number} [specialNumber] - 威力彩的特別號碼 (可選)
         * @param {number} [ballCountOverride] - 覆蓋當前彩票配置的號碼球/數字數量 (用於重置顯示)
         */
        function displayNumbers(numbers, specialNumber = null, ballCountOverride = null) {
            numberDisplay.innerHTML = ''; // 清空現有顯示

            // 根據彩票類型決定要顯示的球/數字數量
            let actualCount;
            if (ballCountOverride !== null) {
                actualCount = ballCountOverride;
            } else if (currentLotteryConfig.type === 'repeatable_digits') {
                actualCount = currentLotteryConfig.digits;
            } else {
                actualCount = currentLotteryConfig.balls;
            }

            // 如果沒有號碼，顯示預設的問號球
            if (numbers.length === 0 && specialNumber === null) {
                for (let i = 0; i < actualCount; i++) {
                    const ball = document.createElement('div');
                    ball.className = 'number-ball';
                    ball.textContent = '?';
                    numberDisplay.appendChild(ball);
                }
                // 對於威力彩，如果沒有號碼，也顯示特別號的問號球
                if (currentLotteryConfig.type === 'two_ranges' && specialNumber === null) {
                     const ball = document.createElement('div');
                     ball.className = 'number-ball special';
                     ball.textContent = '?';
                     numberDisplay.appendChild(ball);
                }
                return;
            }

            // 顯示主號碼球或數字
            numbers.forEach(num => {
                const ball = document.createElement('div');
                ball.className = 'number-ball';
                ball.textContent = num;
                numberDisplay.appendChild(ball);
            });

            // 如果有特別號碼，顯示特別號碼球
            if (specialNumber !== null) {
                const specialBall = document.createElement('div');
                specialBall.className = 'number-ball special'; // 添加特殊樣式
                specialBall.textContent = specialNumber;
                numberDisplay.appendChild(specialBall);
            }
        }

        /**
         * 處理生成號碼按鈕點擊事件
         */
        generateBtn.addEventListener('click', () => {
            if (currentLotteryConfig.type === 'single_range') {
                const generatedNumbers = generateUniqueRandomNumbers(
                    currentLotteryConfig.balls,
                    currentLotteryConfig.min,
                    currentLotteryConfig.max
                );
                displayNumbers(generatedNumbers);
            } else if (currentLotteryConfig.type === 'two_ranges') {
                // 威力彩: 生成主號碼和特別號碼
                const mainNumbers = generateUniqueRandomNumbers(
                    currentLotteryConfig.balls,
                    currentLotteryConfig.min,
                    currentLotteryConfig.max
                );
                const specialNumber = generateUniqueRandomNumbers(
                    1,
                    currentLotteryConfig.specialBall.min,
                    currentLotteryConfig.specialBall.max
                )[0]; // 只需要一個特別號

                displayNumbers(mainNumbers, specialNumber);
            } else if (currentLotteryConfig.type === 'repeatable_digits') {
                // 3星彩, 4星彩: 生成可重複的數字
                const generatedDigits = generateRepeatableRandomNumbers(
                    currentLotteryConfig.digits,
                    currentLotteryConfig.min,
                    currentLotteryConfig.max
                );
                displayNumbers(generatedDigits); // 沒有特別號碼
            }
        });

        /**
         * 處理重置按鈕點擊事件
         */
        resetBtn.addEventListener('click', () => {
            // 重置時根據當前彩票類型顯示正確數量的問號球/數字
            const countToReset = currentLotteryConfig.type === 'repeatable_digits' ? currentLotteryConfig.digits : currentLotteryConfig.balls;
            displayNumbers([], null, countToReset);
        });

        /**
         * 處理彩票類型選擇變更事件
         */
        lotteryTypeSelect.addEventListener('change', (event) => {
            currentLotteryConfig = lotteryConfigs[event.target.value];
            // 選擇變更後重置顯示，並根據新的彩票類型顯示正確數量的問號球/數字
            const countToReset = currentLotteryConfig.type === 'repeatable_digits' ? currentLotteryConfig.digits : currentLotteryConfig.balls;
            displayNumbers([], null, countToReset);
        });

        // 頁面載入時初始化顯示
        document.addEventListener('DOMContentLoaded', () => {
            // 初始顯示時，根據預設選中的彩票類型顯示問號球/數字
            const countToReset = currentLotteryConfig.type === 'repeatable_digits' ? currentLotteryConfig.digits : currentLotteryConfig.balls;
            displayNumbers([], null, countToReset);
        });
    </script>
</body>
</html>
